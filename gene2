#!/usr/bin/python

import argparse
import re
from fileinput import filename
count=0
parser = argparse.ArgumentParser(description='genefiles')

parser.add_argument('filename', type=argparse.FileType('r'), help='Insert a File name')
parser.add_argument('-t', '--TaxID', type=str, nargs='+', action='store', required='true', dest='TAXID', help='Add ID Values')
args = parser.parse_args()
print(args.TAXID)

# TODO: 1) Loop through the input file line by line

# TODO: 2) for the current line get the current Tax_id, Symbol, Synonyms and GeneID into variables
#   parse synonyms delimited by '|" to a list

# TODO: 3) Test if the tax_id for this line is in the list input from the command line by the user
#   If so do 4 and 5
#   else next line
#   increment taxID dictionary, key = ignored

# TODO: 4)
#   increment taxID dictionary
#   Check to see if we have seen the Symbol before in the Symbol dictionary
#   if not add it to the Symbol dictionary and set count to 1, if so increment its count

# TODO: 5)
#   for each Synonym
#   Check to see if we have seen the Synonyms before in the Synonym dictionary
#   if not add it to the Synonym dictionary and set count to 1, if so increment its count

# TODO: 6)
#   After all lines of the file have been processed, report on the Symbols and the Synonyms
#   how may total entries in taxID dictionary, how many for each taxID and "ignored"
#   how many total symbols and
#   how many total synonyms

# TODO: 7)
#   How many are unique?
#   How many are present more than once?

tcount=0
for ln in args.filename:
    lnsplit = ln.strip("\t").split("\t")
    tax_id=lnsplit[0]
    GeneID=lnsplit[1]
    Symbol=lnsplit[2]
    Synonyms=lnsplit[4]

count=0

if tax_id in args.TAXID:
    lst=tax_id

    for args.TAXID in lst:
        if args.TAXID in lst:
            count=count+1

        print(count)

            # print(format(tcount))
    print('TaxId:' + tax_id , 'GeneID:' + GeneID, 'Symbol:' + Symbol,'Synonyms:' + Synonyms)


    # else :
    #     print(False)




# #
# # #Dictionary
#

# if currnet taxID is in the tqaxIDdict
# increment the value of the element keyed at aers.taxID
# something like: taxIDdict{args.taxID}++
# else initalise
# taxIDdict = {args.taxID: 1}


# # d.update(d1)
#TaxID Dictionary
taxIDdict = {args.TAXID: 1}
if args.TAXID in tax_id:
    taxIDdict[args.TAXID]=taxIDdict.get(args.TAXID,0)+1
    if not args.TAXID in tax_id:
        taxIDdict[args.TAXID]=1
print (taxIDdict)

#Synonyms Dictionary
Syndict = {}
if args.TAXID in ln: #should it be ln or tax_id?
    for Synonyms in ln:
        Synonyms = Synonyms.split('|')

        for Synonymname in Synonyms:
            if Synonymname in Syndict:
                Syndict[Synonymname] = Syndict[Synonymname]+1
            else:
                Syndict[Synonymname] = 1
print(Syndict)

#Symbol Dictionary
Symboldict={}
if args.TAXID in ln:
    for Symbol in ln:
        for SymbolID in Symbol:
            if SymbolID in Symboldict:
                Symboldict[SymbolID] = Symboldict[SymbolID] + 1
        else:
            Symboldict[SymbolID]=1

print(Syndict)

#Main Dictionary
maindict = {}
# maindict.update(taxIDdict,Syndict,Symboldict)
# print(maindict)